(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76],{283:(e,r,s)=>{"use strict";s.d(r,{O:()=>d,c:()=>o});var t=s(5155),a=s(2115),n=s(2201),i=s(3004),l=s(5317);let o=(0,a.createContext)(void 0);function d(e){let{children:r}=e,[s,d]=(0,a.useState)(null),[c,u]=(0,a.useState)(null),[m,f]=(0,a.useState)(!0),[p,h]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=(0,i.hg)(n.j2,async e=>{if(h(null),e){d(e);try{let r=(0,l.H9)(n.db,"users",e.uid),s=await (0,l.x7)(r);if(s.exists())u(s.data());else{let s={uid:e.uid,email:e.email,name:e.displayName,isDonor:!1};await (0,l.BN)(r,s),u(s)}}catch(e){console.error("Error fetching/creating user profile:",e),h(e),u(null)}}else d(null),u(null);f(!1)},e=>{console.error("Auth state change error:",e),h(e),d(null),u(null),f(!1)});return()=>e()},[]);let x=(0,a.useCallback)(async()=>{try{await (0,i.CI)(n.j2),d(null),u(null)}catch(e){console.error("Sign out error:",e),h(e)}},[]),g=(0,a.useCallback)(async e=>{if(s)try{let r=(0,l.H9)(n.db,"users",s.uid),t={...e};!e.isDonor||(null==c?void 0:c.donorRegistrationTime)||(t.donorRegistrationTime=(0,l.O5)()),await (0,l.BN)(r,t,{merge:!0}),u(e=>({...e,...t,uid:s.uid}))}catch(e){throw console.error("Error updating user profile:",e),h(e),e}else{let e=Error("User not authenticated for profile update.");throw console.error(e.message),h(e),e}},[s,c]),b=(0,a.useCallback)(async()=>{let e=new i.HF;try{await (0,i.df)(n.j2,e)}catch(e){throw console.error("Google Sign-In error in AuthContext:",e),h(e),e}},[]),y=(0,a.useMemo)(()=>({user:s,userProfile:c,loading:m,error:p,signOut:x,updateUserProfile:g,signInWithGoogle:b}),[s,c,m,p,x,g,b]);return(0,t.jsx)(o.Provider,{value:y,children:r})}},285:(e,r,s)=>{"use strict";s.d(r,{$:()=>d});var t=s(5155),a=s(2115),n=s(9708),i=s(2085),l=s(9434);let o=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.DX:"button";return(0,t.jsx)(u,{className:(0,l.cn)(o({variant:a,size:i,className:s})),ref:r,...c})});d.displayName="Button"},821:(e,r,s)=>{Promise.resolve().then(s.bind(s,7168))},2201:(e,r,s)=>{"use strict";let t,a,n;s.d(r,{db:()=>n,j2:()=>a});var i=s(3915),l=s(6864),o=s(3004),d=s(5317);let c={apiKey:"AIzaSyD4GmyGHApoFuZZV48btnyLLaAaLKrryhA",authDomain:"bloodconnectbd.firebaseapp.com",projectId:"bloodconnectbd",storageBucket:"bloodconnectbd.firebasestorage.app",messagingSenderId:"87550285201",appId:"1:87550285201:web:25286806971f860d76f630",measurementId:"G-L9XFJLP6C9"};console.log("--- Firebase Config (src/config/firebase.ts) ---"),console.log("Attempting to use HARDCODED firebaseConfig. Ensure these values are correct for your project."),console.log("API Key to be used:",c.apiKey?c.apiKey.substring(0,10)+"...":"MISSING/INVALID in hardcoded config"),console.log("Project ID to be used:",c.projectId),console.log("Auth Domain to be used:",c.authDomain),console.log("-------------------------------------------------");let u=!1;try{(0,i.Dk)().length?(console.log("Firebase: App already initialized. Calling getApp()."),t=(0,i.Sx)(),console.log("Using existing Firebase app instance.")):(console.log("Firebase: No apps initialized yet. Calling initializeApp..."),t=(0,i.Wp)(c),console.log("Firebase app initialized successfully with hardcoded config using initializeApp."))}catch(r){let e="CRITICAL Firebase Error during app initialization (initializeApp or getApp) with hardcoded config. \nProvided config: ".concat(JSON.stringify(c),". \nError: ").concat(r.message,"\nStack: ").concat(r.stack);throw console.error("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.error(e),console.error("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),Error(e)}try{a=(0,o.xI)(t),n=(0,d.aU)(t),console.log("Firebase Auth and Firestore services obtained successfully.")}catch(r){let e="CRITICAL Firebase Error during getAuth() or getFirestore() with hardcoded config. \nError: ".concat(r.message,"\nStack: ").concat(r.stack);throw console.error("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),console.error(e),console.error("!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!"),Error(e)}console.log("Firebase config: Running on client-side. Attempting Analytics and Persistence setup."),(0,l.TT)().then(e=>{if(e&&c.measurementId)try{(0,l.P5)(t),console.log("Firebase Analytics initialized (client-side).")}catch(e){console.warn("Firebase Analytics could not be initialized (getAnalytics error on client).",e)}else c.measurementId?console.warn("Firebase: Analytics is NOT supported on this browser, or measurementId is missing; Analytics will not be initialized (client-side)."):console.log("Firebase: No measurementId provided in config, Analytics will not be initialized (client-side).")}).catch(e=>{console.warn("Firebase Analytics support check failed or getAnalytics errored (client-side).",e)}),u||(0,d.ol)(n,{cacheSizeBytes:d.H6}).then(()=>{u=!0,console.log("Firebase Firestore: Offline persistence ENABLED SUCCESSFULLY (client-side).")}).catch(e=>{"failed-precondition"===e.code?(console.warn("Firebase Firestore: Offline persistence FAILED (failed-precondition on client). Usually means multiple tabs are open or persistence already enabled. Assuming active elsewhere."),u=!0):"unimplemented"===e.code?console.warn("Firebase Firestore: Offline persistence FAILED (unimplemented on client). Browser doesn't support required features."):console.error("Firebase Firestore: Offline persistence FAILED with an unexpected error (client-side): ",e)})},2523:(e,r,s)=>{"use strict";s.d(r,{p:()=>i});var t=s(5155),a=s(2115),n=s(9434);let i=a.forwardRef((e,r)=>{let{className:s,type:a,...i}=e;return(0,t.jsx)("input",{type:a,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:r,...i})});i.displayName="Input"},6681:(e,r,s)=>{"use strict";s.d(r,{A:()=>n});var t=s(2115),a=s(283);function n(){let e=(0,t.useContext)(a.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>i,aR:()=>l,wL:()=>u});var t=s(5155),a=s(2115),n=s(9434);let i=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});i.displayName="Card";let l=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});l.displayName="CardHeader";let o=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});o.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent";let u=a.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})});u.displayName="CardFooter"},7168:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>W});var t=s(5155),a=s(6874),n=s.n(a),i=s(5695),l=s(5074),o=s(3402),d=s(6950),c=s(3503),u=s(1721),m=s(6404),f=s(3349),p=s(7104),h=s(3896),x=s(285),g=s(2115),b=s(5977),y=s(9434);let j=g.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(b.bL,{ref:r,className:(0,y.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});j.displayName=b.bL.displayName;let v=g.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(b._V,{ref:r,className:(0,y.cn)("aspect-square h-full w-full",s),...a})});v.displayName=b._V.displayName;let N=g.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(b.H4,{ref:r,className:(0,y.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})});N.displayName=b.H4.displayName;var w=s(9449),A=s(3158),z=s(518),C=s(154);let k=w.bL,F=w.l9;w.YJ,w.ZL,w.Pb,w.z6,g.forwardRef((e,r)=>{let{className:s,inset:a,children:n,...i}=e;return(0,t.jsxs)(w.ZP,{ref:r,className:(0,y.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...i,children:[n,(0,t.jsx)(A.A,{className:"ml-auto"})]})}).displayName=w.ZP.displayName,g.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(w.G5,{ref:r,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=w.G5.displayName;let R=g.forwardRef((e,r)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,t.jsx)(w.ZL,{children:(0,t.jsx)(w.UC,{ref:r,sideOffset:a,className:(0,y.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});R.displayName=w.UC.displayName;let I=g.forwardRef((e,r)=>{let{className:s,inset:a,...n}=e;return(0,t.jsx)(w.q7,{ref:r,className:(0,y.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a&&"pl-8",s),...n})});I.displayName=w.q7.displayName,g.forwardRef((e,r)=>{let{className:s,children:a,checked:n,...i}=e;return(0,t.jsxs)(w.H_,{ref:r,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...i,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(z.A,{className:"h-4 w-4"})})}),a]})}).displayName=w.H_.displayName,g.forwardRef((e,r)=>{let{className:s,children:a,...n}=e;return(0,t.jsxs)(w.hN,{ref:r,className:(0,y.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(C.A,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=w.hN.displayName;let D=g.forwardRef((e,r)=>{let{className:s,inset:a,...n}=e;return(0,t.jsx)(w.JU,{ref:r,className:(0,y.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...n})});D.displayName=w.JU.displayName;let L=g.forwardRef((e,r)=>{let{className:s,...a}=e;return(0,t.jsx)(w.wv,{ref:r,className:(0,y.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});L.displayName=w.wv.displayName;var S=s(6681);function E(e){let{className:r,iconSize:s=24,textSize:a="text-2xl"}=e;return(0,t.jsxs)(n(),{href:"/",className:"flex items-center gap-2 font-bold ".concat(r),children:[(0,t.jsx)(m.A,{color:"hsl(var(--primary))",size:s}),(0,t.jsx)("span",{className:"".concat(a," text-primary"),children:"BloodLink BD"})]})}let U=e=>{let{href:r,children:s,icon:a,className:i,onClick:l}=e;return(0,t.jsx)(x.$,{variant:"ghost",asChild:!0,className:(0,y.cn)("text-sm font-medium text-foreground hover:text-primary",i),children:(0,t.jsxs)(n(),{href:r,onClick:l,children:[a&&(0,t.jsx)("span",{className:"mr-2",children:a}),s]})})};function _(){var e;let{user:r,userProfile:s,signOut:a,loading:g}=(0,S.A)(),b=(0,i.useRouter)(),y=async()=>{await a(),b.push("/")};return(0,t.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 max-w-screen-2xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)(E,{}),(0,t.jsxs)("nav",{className:"hidden md:flex items-center space-x-2 lg:space-x-4",children:[(0,t.jsx)(U,{href:"/donors",icon:(0,t.jsx)(l.A,{size:16}),children:"Find Donors"}),(0,t.jsx)(U,{href:"/request-blood",icon:(0,t.jsx)(o.A,{size:16}),children:"Request Blood"}),(0,t.jsx)(U,{href:"/hospitals",icon:(0,t.jsx)(d.A,{size:16}),children:"Hospitals"}),r&&(0,t.jsx)(U,{href:"/ai-matcher",icon:(0,t.jsx)(c.A,{size:16}),children:"AI Matcher"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-3",children:g?(0,t.jsx)("div",{className:"h-10 w-20 animate-pulse rounded-md bg-muted"}):r?(0,t.jsxs)(k,{children:[(0,t.jsx)(F,{asChild:!0,children:(0,t.jsx)(x.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,t.jsxs)(j,{className:"h-9 w-9",children:[(0,t.jsx)(v,{src:r.photoURL||void 0,alt:(null==s?void 0:s.name)||"User"}),(0,t.jsx)(N,{children:(e=null==s?void 0:s.name)?e.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase():"U"})]})})}),(0,t.jsxs)(R,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(D,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:(null==s?void 0:s.name)||"User"}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:r.email})]})}),(0,t.jsx)(L,{}),(0,t.jsx)(I,{asChild:!0,children:(0,t.jsxs)(n(),{href:"/profile",children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),!(null==s?void 0:s.isDonor)&&(0,t.jsx)(I,{asChild:!0,children:(0,t.jsxs)(n(),{href:"/donate",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Become a Donor"]})}),(0,t.jsx)(L,{}),(0,t.jsxs)(I,{onClick:y,className:"cursor-pointer",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.$,{variant:"ghost",asChild:!0,children:(0,t.jsxs)(n(),{href:"/auth/login",children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Login"]})}),(0,t.jsx)(x.$,{variant:"default",asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(0,t.jsxs)(n(),{href:"/auth/register",children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"})," Register"]})})]})})]})})}var B=s(5318),H=s(8224),P=s(172),O=s(3672),T=s(2523),Z=s(7655);let V=g.forwardRef((e,r)=>{let{className:s,children:a,...n}=e;return(0,t.jsxs)(Z.bL,{ref:r,className:(0,y.cn)("relative overflow-hidden",s),...n,children:[(0,t.jsx)(Z.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,t.jsx)($,{}),(0,t.jsx)(Z.OK,{})]})});V.displayName=Z.bL.displayName;let $=g.forwardRef((e,r)=>{let{className:s,orientation:a="vertical",...n}=e;return(0,t.jsx)(Z.VM,{ref:r,orientation:a,className:(0,y.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,t.jsx)(Z.lr,{className:"relative flex-1 rounded-full bg-border"})})});$.displayName=Z.VM.displayName;var M=s(6695),q=s(4477);let G=(0,q.createServerReference)("40e64753e77b7dd6f62cd17c9a516faf30cc3ab642",q.callServer,void 0,q.findSourceMapURL,"supportChatbot");function K(){let[e,r]=(0,g.useState)(!1),[s,a]=(0,g.useState)([]),[n,i]=(0,g.useState)(""),[l,o]=(0,g.useState)(!1),d=(0,g.useRef)(null),u={id:"initial",role:"assistant",content:"Hi there! I'm BloodLink BD's support assistant. How can I help you today?",timestamp:new Date};(0,g.useEffect)(()=>{e&&0===s.length&&a([u])},[e]),(0,g.useEffect)(()=>{d.current&&d.current.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})},[s]);let m=async e=>{if(e.preventDefault(),!n.trim()||l)return;let r={id:crypto.randomUUID(),role:"user",content:n,timestamp:new Date};a(e=>[...e,r]),i(""),o(!0);try{let e={question:r.content},s=await G(e),t={id:crypto.randomUUID(),role:"assistant",content:s.answer,timestamp:new Date};a(e=>[...e,t])}catch(r){console.error("Chatbot error:",r);let e={id:crypto.randomUUID(),role:"assistant",content:"Sorry, I encountered an error. Please try again later.",timestamp:new Date};a(r=>[...r,e])}finally{o(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.$,{variant:"default",size:"icon",className:"fixed bottom-6 right-6 rounded-full h-14 w-14 shadow-lg z-50 bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>r(!e),"aria-label":"Toggle support chat",children:e?(0,t.jsx)(B.A,{size:24}):(0,t.jsx)(H.A,{size:24})}),e&&(0,t.jsxs)(M.Zp,{className:"fixed bottom-24 right-6 w-80 h-[28rem] shadow-xl z-50 flex flex-col rounded-lg border bg-card text-card-foreground animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,t.jsxs)(M.aR,{className:"flex flex-row items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{size:20,className:"text-primary"}),(0,t.jsx)(M.ZB,{className:"text-lg",children:"Support Chat"})]}),(0,t.jsx)(x.$,{variant:"ghost",size:"icon",onClick:()=>r(!1),className:"h-7 w-7",children:(0,t.jsx)(B.A,{size:18})})]}),(0,t.jsx)(M.Wu,{className:"p-0 flex-1 overflow-hidden",children:(0,t.jsx)(V,{className:"h-full p-4",ref:d,children:(0,t.jsxs)("div",{className:"space-y-4",children:[s.map(e=>(0,t.jsxs)("div",{className:(0,y.cn)("flex items-end gap-2","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,t.jsx)(j,{className:"h-8 w-8",children:(0,t.jsx)(N,{children:(0,t.jsx)(c.A,{size:18})})}),(0,t.jsx)("div",{className:(0,y.cn)("max-w-[75%] rounded-lg px-3 py-2 text-sm shadow","user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.content}),"user"===e.role&&(0,t.jsx)(j,{className:"h-8 w-8",children:(0,t.jsx)(N,{children:"U"})})]},e.id)),l&&(0,t.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,t.jsx)(j,{className:"h-8 w-8",children:(0,t.jsx)(N,{children:(0,t.jsx)(c.A,{size:18})})}),(0,t.jsx)("div",{className:"bg-muted text-muted-foreground rounded-lg px-3 py-2 text-sm shadow",children:(0,t.jsx)(P.A,{className:"h-4 w-4 animate-spin"})})]})]})})}),(0,t.jsx)(M.wL,{className:"p-2 border-t",children:(0,t.jsxs)("form",{onSubmit:m,className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(T.p,{type:"text",placeholder:"Type your message...",value:n,onChange:e=>i(e.target.value),className:"flex-1",disabled:l,"aria-label":"Chat message input"}),(0,t.jsx)(x.$,{type:"submit",size:"icon",disabled:l||!n.trim(),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:l?(0,t.jsx)(P.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(O.A,{size:18})})]})})]})]})}var J=s(9103);function W(e){let{children:r}=e,{loading:s}=(0,S.A)();return s?(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,t.jsx)(J.k,{size:48})}):(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(_,{}),(0,t.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:r}),(0,t.jsx)(K,{})]})}},9103:(e,r,s)=>{"use strict";s.d(r,{k:()=>i});var t=s(5155),a=s(172),n=s(9434);function i(e){let{size:r=24,className:s}=e;return(0,t.jsx)(a.A,{style:{width:r,height:r},className:(0,n.cn)("animate-spin text-primary",s)})}},9434:(e,r,s)=>{"use strict";s.d(r,{cn:()=>n});var t=s(2596),a=s(9688);function n(){for(var e=arguments.length,r=Array(e),s=0;s<e;s++)r[s]=arguments[s];return(0,a.QP)((0,t.$)(r))}}},e=>{var r=r=>e(e.s=r);e.O(0,[992,73,695,874,634,194,278,441,684,358],()=>r(821)),_N_E=e.O()}]);