exports.id=828,exports.ids=[828],exports.modules={7795:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>W});var t=a(60687),r=a(85814),n=a.n(r),i=a(16189),o=a(41936),l=a(81754),d=a(17612),c=a(14283),m=a(58595),f=a(9936),u=a(49497),p=a(13914),x=a(71032),h=a(29523),g=a(43210),b=a(15332),j=a(4780);let v=g.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b.bL,{ref:a,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...s}));v.displayName=b.bL.displayName;let N=g.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b._V,{ref:a,className:(0,j.cn)("aspect-square h-full w-full",e),...s}));N.displayName=b._V.displayName;let y=g.forwardRef(({className:e,...s},a)=>(0,t.jsx)(b.H4,{ref:a,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...s}));y.displayName=b.H4.displayName;var w=a(29398),z=a(74158),C=a(58450),A=a(73256);let R=w.bL,k=w.l9;w.YJ,w.ZL,w.Pb,w.z6,g.forwardRef(({className:e,inset:s,children:a,...r},n)=>(0,t.jsxs)(w.ZP,{ref:n,className:(0,j.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...r,children:[a,(0,t.jsx)(z.A,{className:"ml-auto"})]})).displayName=w.ZP.displayName,g.forwardRef(({className:e,...s},a)=>(0,t.jsx)(w.G5,{ref:a,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})).displayName=w.G5.displayName;let U=g.forwardRef(({className:e,sideOffset:s=4,...a},r)=>(0,t.jsx)(w.ZL,{children:(0,t.jsx)(w.UC,{ref:r,sideOffset:s,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})}));U.displayName=w.UC.displayName;let D=g.forwardRef(({className:e,inset:s,...a},r)=>(0,t.jsx)(w.q7,{ref:r,className:(0,j.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",e),...a}));D.displayName=w.q7.displayName,g.forwardRef(({className:e,children:s,checked:a,...r},n)=>(0,t.jsxs)(w.H_,{ref:n,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:a,...r,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(C.A,{className:"h-4 w-4"})})}),s]})).displayName=w.H_.displayName,g.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(w.hN,{ref:r,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...a,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(w.VF,{children:(0,t.jsx)(A.A,{className:"h-2 w-2 fill-current"})})}),s]})).displayName=w.hN.displayName;let L=g.forwardRef(({className:e,inset:s,...a},r)=>(0,t.jsx)(w.JU,{ref:r,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...a}));L.displayName=w.JU.displayName;let _=g.forwardRef(({className:e,...s},a)=>(0,t.jsx)(w.wv,{ref:a,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));_.displayName=w.wv.displayName;var S=a(87979);function q({className:e,iconSize:s=24,textSize:a="text-2xl"}){return(0,t.jsxs)(n(),{href:"/",className:`flex items-center gap-2 font-bold ${e}`,children:[(0,t.jsx)(f.A,{color:"hsl(var(--primary))",size:s}),(0,t.jsx)("span",{className:`${a} text-primary`,children:"BloodLink BD"})]})}let F=({href:e,children:s,icon:a,className:r,onClick:i})=>(0,t.jsx)(h.$,{variant:"ghost",asChild:!0,className:(0,j.cn)("text-sm font-medium text-foreground hover:text-primary",r),children:(0,t.jsxs)(n(),{href:e,onClick:i,children:[a&&(0,t.jsx)("span",{className:"mr-2",children:a}),s]})});function B(){var e;let{user:s,userProfile:a,signOut:r,loading:g}=(0,S.A)(),b=(0,i.useRouter)(),j=async()=>{await r(),b.push("/")};return(0,t.jsx)("header",{className:"sticky top-0 z-50 w-full border-b border-border/40 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,t.jsxs)("div",{className:"container flex h-16 max-w-screen-2xl items-center justify-between px-4 sm:px-6 lg:px-8",children:[(0,t.jsx)(q,{}),(0,t.jsxs)("nav",{className:"hidden md:flex items-center space-x-2 lg:space-x-4",children:[(0,t.jsx)(F,{href:"/donors",icon:(0,t.jsx)(o.A,{size:16}),children:"Find Donors"}),(0,t.jsx)(F,{href:"/request-blood",icon:(0,t.jsx)(l.A,{size:16}),children:"Request Blood"}),(0,t.jsx)(F,{href:"/hospitals",icon:(0,t.jsx)(d.A,{size:16}),children:"Hospitals"}),s&&(0,t.jsx)(F,{href:"/ai-matcher",icon:(0,t.jsx)(c.A,{size:16}),children:"AI Matcher"})]}),(0,t.jsx)("div",{className:"flex items-center space-x-3",children:g?(0,t.jsx)("div",{className:"h-10 w-20 animate-pulse rounded-md bg-muted"}):s?(0,t.jsxs)(R,{children:[(0,t.jsx)(k,{asChild:!0,children:(0,t.jsx)(h.$,{variant:"ghost",className:"relative h-10 w-10 rounded-full",children:(0,t.jsxs)(v,{className:"h-9 w-9",children:[(0,t.jsx)(N,{src:s.photoURL||void 0,alt:a?.name||"User"}),(0,t.jsx)(y,{children:(e=a?.name)?e.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase():"U"})]})})}),(0,t.jsxs)(U,{className:"w-56",align:"end",forceMount:!0,children:[(0,t.jsx)(L,{className:"font-normal",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium leading-none",children:a?.name||"User"}),(0,t.jsx)("p",{className:"text-xs leading-none text-muted-foreground",children:s.email})]})}),(0,t.jsx)(_,{}),(0,t.jsx)(D,{asChild:!0,children:(0,t.jsxs)(n(),{href:"/profile",children:[(0,t.jsx)(m.A,{className:"mr-2 h-4 w-4"}),"Profile"]})}),!a?.isDonor&&(0,t.jsx)(D,{asChild:!0,children:(0,t.jsxs)(n(),{href:"/donate",children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Become a Donor"]})}),(0,t.jsx)(_,{}),(0,t.jsxs)(D,{onClick:j,className:"cursor-pointer",children:[(0,t.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.$,{variant:"ghost",asChild:!0,children:(0,t.jsxs)(n(),{href:"/auth/login",children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Login"]})}),(0,t.jsx)(h.$,{variant:"default",asChild:!0,className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:(0,t.jsxs)(n(),{href:"/auth/register",children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Register"]})})]})})]})})}var P=a(78726),$=a(86910),M=a(11516),Z=a(85866),I=a(89667),T=a(68123);let V=g.forwardRef(({className:e,children:s,...a},r)=>(0,t.jsxs)(T.bL,{ref:r,className:(0,j.cn)("relative overflow-hidden",e),...a,children:[(0,t.jsx)(T.LM,{className:"h-full w-full rounded-[inherit]",children:s}),(0,t.jsx)(H,{}),(0,t.jsx)(T.OK,{})]}));V.displayName=T.bL.displayName;let H=g.forwardRef(({className:e,orientation:s="vertical",...a},r)=>(0,t.jsx)(T.VM,{ref:r,orientation:s,className:(0,j.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,t.jsx)(T.lr,{className:"relative flex-1 rounded-full bg-border"})}));H.displayName=T.VM.displayName;var O=a(44493),E=a(6475);let J=(0,E.createServerReference)("40e64753e77b7dd6f62cd17c9a516faf30cc3ab642",E.callServer,void 0,E.findSourceMapURL,"supportChatbot");function Y(){let[e,s]=(0,g.useState)(!1),[a,r]=(0,g.useState)([]),[n,i]=(0,g.useState)(""),[o,l]=(0,g.useState)(!1),d=(0,g.useRef)(null),m=async e=>{if(e.preventDefault(),!n.trim()||o)return;let s={id:crypto.randomUUID(),role:"user",content:n,timestamp:new Date};r(e=>[...e,s]),i(""),l(!0);try{let e={question:s.content},a=await J(e),t={id:crypto.randomUUID(),role:"assistant",content:a.answer,timestamp:new Date};r(e=>[...e,t])}catch(s){console.error("Chatbot error:",s);let e={id:crypto.randomUUID(),role:"assistant",content:"Sorry, I encountered an error. Please try again later.",timestamp:new Date};r(s=>[...s,e])}finally{l(!1)}};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.$,{variant:"default",size:"icon",className:"fixed bottom-6 right-6 rounded-full h-14 w-14 shadow-lg z-50 bg-primary hover:bg-primary/90 text-primary-foreground",onClick:()=>s(!e),"aria-label":"Toggle support chat",children:e?(0,t.jsx)(P.A,{size:24}):(0,t.jsx)($.A,{size:24})}),e&&(0,t.jsxs)(O.Zp,{className:"fixed bottom-24 right-6 w-80 h-[28rem] shadow-xl z-50 flex flex-col rounded-lg border bg-card text-card-foreground animate-in fade-in-0 zoom-in-95 slide-in-from-bottom-4 duration-300",children:[(0,t.jsxs)(O.aR,{className:"flex flex-row items-center justify-between p-4 border-b",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c.A,{size:20,className:"text-primary"}),(0,t.jsx)(O.ZB,{className:"text-lg",children:"Support Chat"})]}),(0,t.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>s(!1),className:"h-7 w-7",children:(0,t.jsx)(P.A,{size:18})})]}),(0,t.jsx)(O.Wu,{className:"p-0 flex-1 overflow-hidden",children:(0,t.jsx)(V,{className:"h-full p-4",ref:d,children:(0,t.jsxs)("div",{className:"space-y-4",children:[a.map(e=>(0,t.jsxs)("div",{className:(0,j.cn)("flex items-end gap-2","user"===e.role?"justify-end":"justify-start"),children:["assistant"===e.role&&(0,t.jsx)(v,{className:"h-8 w-8",children:(0,t.jsx)(y,{children:(0,t.jsx)(c.A,{size:18})})}),(0,t.jsx)("div",{className:(0,j.cn)("max-w-[75%] rounded-lg px-3 py-2 text-sm shadow","user"===e.role?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e.content}),"user"===e.role&&(0,t.jsx)(v,{className:"h-8 w-8",children:(0,t.jsx)(y,{children:"U"})})]},e.id)),o&&(0,t.jsxs)("div",{className:"flex justify-start items-center gap-2",children:[(0,t.jsx)(v,{className:"h-8 w-8",children:(0,t.jsx)(y,{children:(0,t.jsx)(c.A,{size:18})})}),(0,t.jsx)("div",{className:"bg-muted text-muted-foreground rounded-lg px-3 py-2 text-sm shadow",children:(0,t.jsx)(M.A,{className:"h-4 w-4 animate-spin"})})]})]})})}),(0,t.jsx)(O.wL,{className:"p-2 border-t",children:(0,t.jsxs)("form",{onSubmit:m,className:"flex w-full items-center space-x-2",children:[(0,t.jsx)(I.p,{type:"text",placeholder:"Type your message...",value:n,onChange:e=>i(e.target.value),className:"flex-1",disabled:o,"aria-label":"Chat message input"}),(0,t.jsx)(h.$,{type:"submit",size:"icon",disabled:o||!n.trim(),className:"bg-primary hover:bg-primary/90 text-primary-foreground",children:o?(0,t.jsx)(M.A,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(Z.A,{size:18})})]})})]})]})}var G=a(71857);function W({children:e}){let{loading:s}=(0,S.A)();return s?(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center",children:(0,t.jsx)(G.k,{size:48})}):(0,t.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,t.jsx)(B,{}),(0,t.jsx)("main",{className:"flex-1 container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:e}),(0,t.jsx)(Y,{})]})}},12787:(e,s,a)=>{Promise.resolve().then(a.bind(a,60448))},23563:(e,s,a)=>{Promise.resolve().then(a.bind(a,7795))},29523:(e,s,a)=>{"use strict";a.d(s,{$:()=>d});var t=a(60687),r=a(43210),n=a(8730),i=a(24224),o=a(4780);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef(({className:e,variant:s,size:a,asChild:r=!1,...i},d)=>{let c=r?n.DX:"button";return(0,t.jsx)(c,{className:(0,o.cn)(l({variant:s,size:a,className:e})),ref:d,...i})});d.displayName="Button"},32067:(e,s,a)=>{"use strict";a.r(s),a.d(s,{"40e64753e77b7dd6f62cd17c9a516faf30cc3ab642":()=>c});var t=a(91199);a(42087);var r=a(37612),n=a(56758);let i=(0,r.genkit)({plugins:[(0,n.YF)()],model:"googleai/gemini-2.0-flash"});var o=a(33331);let l=r.z.object({question:r.z.string().describe("The user's question about the app's features.")}),d=r.z.object({answer:r.z.string().describe("The answer to the user's question.")});async function c(e){return f(e)}let m=i.definePrompt({name:"supportChatbotPrompt",input:{schema:l},output:{schema:d},prompt:`You are a support chatbot for the BloodLink BD app. Answer the user's questions about the app's features.

Question: {{{question}}}`}),f=i.defineFlow({name:"supportChatbotFlow",inputSchema:l,outputSchema:d},async e=>{let{output:s}=await m(e);return s});(0,o.D)([c]),(0,t.A)(c,"40e64753e77b7dd6f62cd17c9a516faf30cc3ab642",null)},44493:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>i,aR:()=>o,wL:()=>m});var t=a(60687),r=a(43210),n=a(4780);let i=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));i.displayName="Card";let o=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let l=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));l.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let m=r.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",e),...s}));m.displayName="CardFooter"},47002:e=>{function s(e){var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}s.keys=()=>[],s.resolve=s,s.id=47002,e.exports=s},60448:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/user/studio/src/app/(main)/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/user/studio/src/app/(main)/layout.tsx","default")},70440:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>r});var t=a(31658);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,t.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},71857:(e,s,a)=>{"use strict";a.d(s,{k:()=>i});var t=a(60687),r=a(11516),n=a(4780);function i({size:e=24,className:s}){return(0,t.jsx)(r.A,{style:{width:e,height:e},className:(0,n.cn)("animate-spin text-primary",s)})}},87979:(e,s,a)=>{"use strict";a.d(s,{A:()=>n});var t=a(43210),r=a(63213);function n(){let e=(0,t.useContext)(r.c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},89667:(e,s,a)=>{"use strict";a.d(s,{p:()=>i});var t=a(60687),r=a(43210),n=a(4780);let i=r.forwardRef(({className:e,type:s,...a},r)=>(0,t.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...a}));i.displayName="Input"}};