(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[983],{3896:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})},6117:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var r=a(5155),l=a(2115),t=a(6874),i=a.n(t),n=a(5695),o=a(2177),c=a(221),d=a(5594),m=a(3004),u=a(2201),x=a(6681),h=a(7481),p=a(285),j=a(6695),y=a(5937),g=a(2523),w=a(172),f=a(3896),v=a(7104);let b=d.z.object({name:d.z.string().min(3,{message:"Full name must be at least 3 characters."}),email:d.z.string().email({message:"Please enter a valid email address."}),password:d.z.string().min(8,{message:"Password must be at least 8 characters."}),confirmPassword:d.z.string()}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match.",path:["confirmPassword"]});function N(){let e=(0,n.useRouter)(),{toast:s}=(0,h.dj)(),{user:a,loading:t,updateUserProfile:d,signInWithGoogle:N}=(0,x.A)(),[k,P]=(0,l.useState)(!1),[A,B]=(0,l.useState)(!1),R=(0,o.mN)({resolver:(0,c.u)(b),defaultValues:{name:"",email:"",password:"",confirmPassword:""}});async function C(e){P(!0);try{let a=(await (0,m.eJ)(u.j2,e.email,e.password)).user;a&&(await (0,m.r7)(a,{displayName:e.name}),await d({uid:a.uid,name:e.name,email:a.email,isDonor:!1})),s({title:"Registration Successful!",description:"Welcome to BloodLink BD. You can now explore the app."})}catch(a){console.error("Registration error:",a);let e="An unexpected error occurred. Please try again.";"auth/email-already-in-use"===a.code?e="This email address is already in use. Please try another one or log in.":"auth/weak-password"===a.code&&(e="The password is too weak. Please choose a stronger password."),s({title:"Registration Failed",description:e,variant:"destructive"})}finally{P(!1)}}(0,l.useEffect)(()=>{!t&&a&&e.push("/")},[a,t,e]);let S=async()=>{B(!0);try{await N(),s({title:"Signed up with Google!",description:"Welcome to BloodLink BD."})}catch(a){console.error("Google Sign-Up error on Register Page:",a);let e="An unexpected error occurred. Please try again.";"auth/popup-closed-by-user"===a.code?e="Sign-up process was cancelled. Please try again.":"auth/cancelled-popup-request"===a.code?e="Multiple sign-up attempts. Please try again.":a.message&&(e=a.message),s({title:"Google Sign-Up Failed",description:e,variant:"destructive"})}finally{B(!1)}};return t&&!a?(0,r.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,r.jsx)(w.A,{className:"h-8 w-8 animate-spin text-primary"})}):a?null:(0,r.jsxs)(j.Zp,{className:"w-full shadow-xl animate-fade-in-up",children:[(0,r.jsxs)(j.aR,{className:"text-center",children:[(0,r.jsx)(f.A,{className:"mx-auto h-10 w-10 text-primary mb-3"}),(0,r.jsx)(j.ZB,{className:"text-2xl",children:"Become a Valued Member"}),(0,r.jsx)(j.BT,{children:"Join the BloodLink BD community to save lives and find support when you need it."})]}),(0,r.jsxs)(j.Wu,{className:"space-y-6",children:[(0,r.jsx)(y.lV,{...R,children:(0,r.jsxs)("form",{onSubmit:R.handleSubmit(C),className:"space-y-4",children:[(0,r.jsx)(y.zB,{control:R.control,name:"name",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Full Name"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(g.p,{placeholder:"e.g., John Doe",...s,disabled:k||A})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(y.zB,{control:R.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Email Address"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(g.p,{type:"email",placeholder:"e.g., member@example.com",...s,disabled:k||A})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(y.zB,{control:R.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Password"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(g.p,{type:"password",placeholder:"••••••••",...s,disabled:k||A})}),(0,r.jsx)(y.Rr,{children:"Must be at least 8 characters."}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(y.zB,{control:R.control,name:"confirmPassword",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Confirm Password"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(g.p,{type:"password",placeholder:"••••••••",...s,disabled:k||A})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsxs)(p.$,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:k||A,children:[k&&(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})}),(0,r.jsxs)("div",{className:"relative my-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,r.jsxs)(p.$,{variant:"outline",className:"w-full",disabled:k||A,onClick:S,children:[A?(0,r.jsx)(w.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)("svg",{className:"mr-2 h-4 w-4 transition-transform duration-200 ease-in-out hover:scale-110","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 118.3 512 0 398.5 0 256S118.3 0 244 0c69.9 0 125.5 28.9 165.7 68.6L372.3 112.6C339.2 83.8 296.3 64 244 64c-95.6 0-173.5 78.3-173.5 174.7S148.4 413.4 244 413.4c52.8 0 95.3-22.1 126.8-53.1 26.7-26 42.9-62.1 47.9-99.9H244V261.8h244z"})}),"Sign up with Google"]})]}),(0,r.jsx)(j.wL,{className:"flex flex-col items-center gap-2",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Already a member?"," ",(0,r.jsx)(p.$,{variant:"link",asChild:!0,className:"px-0 text-primary",children:(0,r.jsxs)(i(),{href:"/auth/login",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Login to your account"]})})]})})]})}},7104:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]])},8356:(e,s,a)=>{Promise.resolve().then(a.bind(a,6117))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,73,695,874,198,305,441,684,358],()=>s(8356)),_N_E=e.O()}]);