(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[859],{3896:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(157).A)("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]])},5695:(e,s,a)=>{"use strict";var r=a(8999);a.o(r,"useRouter")&&a.d(s,{useRouter:function(){return r.useRouter}})},7884:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var r=a(5155),l=a(2115),i=a(6874),t=a.n(i),n=a(5695),c=a(2177),o=a(221),d=a(5594),m=a(3004),u=a(2201),x=a(6681),h=a(7481),p=a(285),g=a(6695),y=a(5937),j=a(2523),f=a(172);let w=(0,a(157).A)("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var v=a(3896);let N=d.z.object({email:d.z.string().email({message:"Please enter a valid email address."}),password:d.z.string().min(1,{message:"Password is required."})});function b(){let e=(0,n.useRouter)(),{toast:s}=(0,h.dj)(),{user:a,loading:i,signInWithGoogle:d}=(0,x.A)(),[b,k]=(0,l.useState)(!1),[S,B]=(0,l.useState)(!1),C=(0,c.mN)({resolver:(0,o.u)(N),defaultValues:{email:"",password:""}});async function A(e){k(!0);try{await (0,m.x9)(u.j2,e.email,e.password),s({title:"Login Successful!",description:"Welcome back to BloodLink BD."})}catch(a){console.error("Login error:",a);let e="An unexpected error occurred. Please try again.";"auth/user-not-found"===a.code||"auth/wrong-password"===a.code||"auth/invalid-credential"===a.code?e="Invalid email or password. Please try again.":"auth/invalid-email"===a.code&&(e="The email address is not valid."),s({title:"Login Failed",description:e,variant:"destructive"})}finally{k(!1)}}(0,l.useEffect)(()=>{!i&&a&&e.push("/")},[a,i,e]);let L=async()=>{B(!0);try{await d(),s({title:"Signed in with Google!",description:"Welcome to BloodLink BD."})}catch(a){console.error("Google Sign-In error on Login Page:",a);let e="An unexpected error occurred. Please try again.";"auth/popup-closed-by-user"===a.code?e="Sign-in process was cancelled. Please try again.":"auth/cancelled-popup-request"===a.code?e="Multiple sign-in attempts. Please try again.":a.message&&(e=a.message),s({title:"Google Sign-In Failed",description:e,variant:"destructive"})}finally{B(!1)}};return i&&!a?(0,r.jsx)("div",{className:"flex justify-center items-center py-10",children:(0,r.jsx)(f.A,{className:"h-8 w-8 animate-spin text-primary"})}):a?null:(0,r.jsxs)(g.Zp,{className:"w-full shadow-xl animate-fade-in-up",children:[(0,r.jsxs)(g.aR,{className:"text-center",children:[(0,r.jsx)(w,{className:"mx-auto h-10 w-10 text-primary mb-3"}),(0,r.jsx)(g.ZB,{className:"text-2xl",children:"Welcome Back, Life-Saver!"}),(0,r.jsx)(g.BT,{children:"Sign in to access your BloodLink BD membership and continue making a difference."})]}),(0,r.jsxs)(g.Wu,{className:"space-y-6",children:[(0,r.jsx)(y.lV,{...C,children:(0,r.jsxs)("form",{onSubmit:C.handleSubmit(A),className:"space-y-4",children:[(0,r.jsx)(y.zB,{control:C.control,name:"email",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Email Address"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(j.p,{type:"email",placeholder:"member@example.com",...s,disabled:b||S})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsx)(y.zB,{control:C.control,name:"password",render:e=>{let{field:s}=e;return(0,r.jsxs)(y.eI,{children:[(0,r.jsx)(y.lR,{children:"Password"}),(0,r.jsx)(y.MJ,{children:(0,r.jsx)(j.p,{type:"password",placeholder:"••••••••",...s,disabled:b||S})}),(0,r.jsx)(y.C5,{})]})}}),(0,r.jsxs)(p.$,{type:"submit",className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground",disabled:b||S,children:[b&&(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Login"]})]})}),(0,r.jsxs)("div",{className:"relative my-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,r.jsx)("span",{className:"w-full border-t"})}),(0,r.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,r.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,r.jsxs)(p.$,{variant:"outline",className:"w-full",disabled:b||S,onClick:L,children:[S?(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,r.jsx)("svg",{className:"mr-2 h-4 w-4 transition-transform duration-200 ease-in-out hover:scale-110","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"google",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 488 512",children:(0,r.jsx)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 381.5 512 244 512 118.3 512 0 398.5 0 256S118.3 0 244 0c69.9 0 125.5 28.9 165.7 68.6L372.3 112.6C339.2 83.8 296.3 64 244 64c-95.6 0-173.5 78.3-173.5 174.7S148.4 413.4 244 413.4c52.8 0 95.3-22.1 126.8-53.1 26.7-26 42.9-62.1 47.9-99.9H244V261.8h244z"})}),"Sign in with Google"]})]}),(0,r.jsx)(g.wL,{className:"flex flex-col items-center gap-2",children:(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Not a member yet?"," ",(0,r.jsx)(p.$,{variant:"link",asChild:!0,className:"px-0 text-primary",children:(0,r.jsxs)(t(),{href:"/auth/register",children:[(0,r.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Join the community"]})})]})})]})}},8930:(e,s,a)=>{Promise.resolve().then(a.bind(a,7884))}},e=>{var s=s=>e(e.s=s);e.O(0,[992,73,695,874,198,305,441,684,358],()=>s(8930)),_N_E=e.O()}]);